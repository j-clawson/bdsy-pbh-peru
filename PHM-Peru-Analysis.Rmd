---
title: "Time Series Analysis"
author: "James Clawson, Antonio Bolea, Kevin Truong"
date: 6/54/2025
date-format: long
format:
  html:
    theme: sandstone
    toc: true
    html-math-method: katex
editor: visual
highlight-style: tango
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Environment Setup

```{r}
#| eval: FALSE

renv::init()      # Initialize the project     
renv::restore()   # Download packages and their version saved in the lockfile
```

```{r}
#| message: FALSE
#| warning: FALSE

suppressPackageStartupMessages({
  library("readr")      # For reading in the data
  library("tibble")     # For handling tidyverse tibble data classes
  library("tidyr")      # For tidying data 
  library("dplyr")      # For data manipulation 
  library("stringr")    # For string manipulation
  library("MASS")       # Functions/datasets for statistical analysis
  library("lubridate")  # For date manipulation
  library("ggplot2")    # For creating static visualizations
  library("scales")     # For formatting plots axis
  library("gridExtra")  # Creates multiple grid-based plots
})


# Function to select "Not In"
'%!in%' <- function(x,y)!('%in%'(x,y))
```

## Load the data

NOTE: Location of csv file may be different, adjust accordingly

```{r}
df_cases <- read.csv('data\\peru\\peru.csv')
df_gps <- read.csv('data\\peru\\peru_gps.csv')
```

```{r}
colnames(df_cases) <- c('region', 'province', 'district', 'year', 'week', 'department_code', 'geo_code', 'under_5_noncase', 'under_5_case', 'over_60_case', 'under_5_hospitalized', 'over_60_hospitalized', 'under_5_death', 'over_60_death')
glimpse(df_cases)
```

```{r}
glimpse(df_gps)
```

```{r}
summary(df_cases)
```

## Data dictionary

-   **region:** The geographic region in which the data was recorded: refers to Peru's departments (states).

-   **province:** The province in which the data was recorded: refers to Peru's counties.

-   **district:** The district in which the data was recorded: refers to Peru's towns/cities.

-   **year:** The year in which the data was recorded.

-   **week:** The specific week of the year in which the data was recorded.

-   **department_code:** The code of the health directorate in which the data was recorded.

-   **geo_code:** The geographical identification code of the area in which the data was recorded. Peru uses UBIGEO— "UBlcación GEOgráfica," a code assigned to particular districts in Peru.

-   **under_5_noncase:** A count representing the number of recorded pneumonia non-cases for children under 5-years-old.

-   **under_5_case:** A count representing the number of recorded pneumonia cases for children under 5-years-old.

-   **over_60_case:** A count representing the number of recorded pneumonia cases for adults over 60-years-old.

-   **under_5_hospitalized:** A count representing the number of pneumonia-related hospitalizations for children under 5-years-old.

-   **over_60_hospitalized:** A count representing the number of pneumonia-related hospitalizations for adults over 60-years-old.

-   **under_5_death:** A count representing the number of pneumonia-related deaths for children under 5-years-old.

-   **over_60_death:** A count representing the number of pneumonia-related deaths for adults over 60-years-old.
